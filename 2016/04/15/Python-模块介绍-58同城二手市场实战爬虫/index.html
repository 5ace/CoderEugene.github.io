<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="爬虫利器,Python3,lxml,BeautifulSoup4,requests," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="其实最初想学Python就是为了爬虫而来的，不知怎么写着写着就写到算法上去了，为了致敬我最初的想法我就简单实现了58同城的爬虫作为练习">
<meta property="og:type" content="article">
<meta property="og:title" content="Python-模块介绍+58同城二手市场实战爬虫">
<meta property="og:url" content="http://yoursite.com/2016/04/15/Python-模块介绍-58同城二手市场实战爬虫/index.html">
<meta property="og:site_name" content="EUAdvancer">
<meta property="og:description" content="其实最初想学Python就是为了爬虫而来的，不知怎么写着写着就写到算法上去了，为了致敬我最初的想法我就简单实现了58同城的爬虫作为练习">
<meta property="og:image" content="http://7xryau.com1.z0.glb.clouddn.com/eighthpicture.jpg">
<meta property="og:image" content="http://7xryau.com1.z0.glb.clouddn.com/%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%971.png">
<meta property="og:image" content="http://7xryau.com1.z0.glb.clouddn.com/%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%972.png">
<meta property="og:image" content="http://7xryau.com1.z0.glb.clouddn.com/%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%973.png">
<meta property="og:image" content="http://7xryau.com1.z0.glb.clouddn.com/%E7%88%AC%E8%99%AB%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png">
<meta property="og:updated_time" content="2016-04-16T13:00:50.093Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python-模块介绍+58同城二手市场实战爬虫">
<meta name="twitter:description" content="其实最初想学Python就是为了爬虫而来的，不知怎么写着写着就写到算法上去了，为了致敬我最初的想法我就简单实现了58同城的爬虫作为练习">
<meta name="twitter:image" content="http://7xryau.com1.z0.glb.clouddn.com/eighthpicture.jpg">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Python-模块介绍+58同城二手市场实战爬虫 | EUAdvancer </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?27412ed04aae550d2faf683f58d6b554";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">EUAdvancer</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">程序猿，码农，在读</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Python-模块介绍+58同城二手市场实战爬虫
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-15T21:45:45+08:00" content="2016-04-15">
              2016-04-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/15/Python-模块介绍-58同城二手市场实战爬虫/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/04/15/Python-模块介绍-58同城二手市场实战爬虫/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://7xryau.com1.z0.glb.clouddn.com/eighthpicture.jpg" alt="bg"><br>其实最初想学Python就是为了爬虫而来的，不知怎么写着写着就写到算法上去了，为了致敬我最初的想法我就简单实现了58同城的爬虫作为练习<br><a id="more"></a></p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>python是出了名的适合写爬虫的语言，而我在这次的实现后也非常同意这一观点。当然，也是因为要爬取的网站并不难，因为网站并没有设置反爬虫等蛋疼的东西，所以你也想要牛刀小试一下自己的学习效果，同样可以爬一爬这个网站哦！</p>
<h3 id="爬虫利器-模块"><a href="#爬虫利器-模块" class="headerlink" title="爬虫利器-模块"></a>爬虫利器-模块</h3><ul>
<li>requests</li>
<li>BeautifulSoup4</li>
<li>lxml</li>
</ul>
<h4 id="安装方法"><a href="#安装方法" class="headerlink" title="安装方法"></a>安装方法</h4><p>使用Pycharm安装，这里以requests举例，另外两个同样操作即可<br><img src="http://7xryau.com1.z0.glb.clouddn.com/%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%971.png" alt="python"><br><img src="http://7xryau.com1.z0.glb.clouddn.com/%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%972.png" alt=""><br><img src="http://7xryau.com1.z0.glb.clouddn.com/%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%973.png" alt=""></p>
<h4 id="模块简单介绍"><a href="#模块简单介绍" class="headerlink" title="模块简单介绍"></a>模块简单介绍</h4><p>为了更好的实现爬虫，对于这些库的基本操作我们是必须熟悉的，这里列举一些常用的函数，更多的移步官方介绍</p>
<h5 id="requests"><a href="#requests" class="headerlink" title="requests"></a>requests</h5><ul>
<li><a href="http://docs.python-requests.org/en/master/user/quickstart/" target="_blank" rel="external">官方介绍</a>：<blockquote>
<p>Requests allow you to send HTTP/1.1 requests. You can add headers, form data, multipart files, and parameters with simple Python dictionaries, and access the response data in the same way. It’s powered by httplib and urllib3, but it does all the hard work and crazy hacks for you.<br>requests是python的一个HTTP客户端库，它的功能和urllib差不多，但是使用更为简单</p>
</blockquote>
</li>
<li><p>GET提交</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 无参get提交</span></span><br><span class="line">r = requests.get(url)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带参提交</span></span><br><span class="line">r = requests.get(url,params = _params)  [_params为get提交参数，类型为字典，例如&#123;<span class="string">'info_hash'</span>:<span class="string">'1234'</span>,<span class="string">'id'</span>:<span class="string">'1'</span>&#125;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>POST提交</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r = requests.post(url,data = _data)  [_data为post提交参数，类型为字典，例如&#123;<span class="string">'info_hash'</span>:<span class="string">'1234'</span>,<span class="string">'id'</span>:<span class="string">'1'</span>&#125;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取响应正文内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回类型自动解码为unicode（因为我在爬虫中解析过程中遇到了解析乱码的情况，所以不推荐）</span></span><br><span class="line">data = r.text  [也可以自己设定编码：r.text.encoding(<span class="string">"utf-8"</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回类型为字节(需要自己解码，当然配合BeautifulSoup并不难)</span></span><br><span class="line">data = r.content</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取响应头内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取所有头信息</span></span><br><span class="line">headers = r.headers</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取某一头信息</span></span><br><span class="line">header = r.headers[<span class="string">"Content-Type"</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取响应cookie</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取所有cookie信息</span></span><br><span class="line">cookies = r.cookies</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取某一cookie信息</span></span><br><span class="line">cookie = r.cookies[<span class="string">"ftn5k"</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取请求头内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request_headers = r.request.headers</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取网页编码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">encoding = r.encoding</span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义请求头</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(url, headers=&#123;<span class="string">"User-Agent"</span>:<span class="string">"xxx"</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义cookie提交</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(url, cookies=&#123;<span class="string">"ftn5k"</span>,<span class="string">"xxx"</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改编码（r.text会使用修改后的编码解码）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r.encoding = <span class="string">'utf-8'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="BeautifulSoup4"><a href="#BeautifulSoup4" class="headerlink" title="BeautifulSoup4"></a>BeautifulSoup4</h5><p>令人惊喜的是BeautifulSoup4有中文官方文档 <a href="http://beautifulsoup.readthedocs.org/zh_CN/latest/" target="_blank" rel="external">Beautiful Soup 4.2.0 文档</a></p>
<ul>
<li><a href="http://beautifulsoup.readthedocs.org/zh_CN/latest/" target="_blank" rel="external">Beautiful Soup 4.2.0 文档</a><blockquote>
<p>Beautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.</p>
</blockquote>
</li>
<li><p>创建BeautifulSoup4对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可以传入一个文件句柄</span></span><br><span class="line">soup = BeautifulSoup(open(<span class="string">"index.html"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以传入一段字符串</span></span><br><span class="line">soup = BeautifulSoup(<span class="string">"&lt;html&gt;...&lt;/html&gt;"</span>)  [可以将r.content传入，BeautifulSoup会自动解析]</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过css选择器搜索</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过类名搜索(如果结合chrome的开发者工具可以copy selector放入简单的搜索)</span></span><br><span class="line">soup.select(<span class="string">".sister"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过id查找</span></span><br><span class="line">soup.select(<span class="string">"#link"</span>)  [id = <span class="string">'link'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过tag标签搜索</span></span><br><span class="line">soup.select(<span class="string">"p &gt; a"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过某一属性查找</span></span><br><span class="line">soup.select(<span class="string">"a[href="</span>xx<span class="string">"]"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>增加解析器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(r.content, <span class="string">'lxml'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义编码(自动解析会使用修改后的编码)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(r.content, from_encoding=<span class="string">'utf-8'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>得到tag中的文本内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date = soup.get_text()   [返回类型为Unicode]</span><br></pre></td></tr></table></figure>
</li>
<li><p>得到tag的属性值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date = soup.get(<span class="string">'src'</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 58同城二手市场爬虫，参数u是要爬取的url</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get58City</span><span class="params">(u)</span>:</span></span><br><span class="line">    url = u</span><br><span class="line">    data = requests.get(url)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 由于data.text自动通过编码ISO-8859-1返回unicode字符导致中文乱码，所以先修改编码，再得到text</span></span><br><span class="line">    data.encoding = <span class="string">"utf-8"</span>  <span class="comment"># 将编码ISO-8859-1修改为编码为utf-8</span></span><br><span class="line">    soup = BeautifulSoup(data.text, <span class="string">'lxml'</span>)   <span class="comment"># 更简单的方法是使用data.content,它返回的是字节，而Beautiful会将其转码成unicode</span></span><br><span class="line">    <span class="comment"># print(soup)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 搜索title，img，content</span></span><br><span class="line">    title = soup.find_all(<span class="string">'a'</span>, class_=<span class="string">'t'</span>)</span><br><span class="line">    <span class="comment"># #infolist &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td.img &gt; a &gt; img</span></span><br><span class="line">    <span class="comment"># img = soup.find_all(src=re.compile('jpg'))  # 正则搜索图片</span></span><br><span class="line">    img = soup.select(<span class="string">'#infolist &gt; table &gt; tr &gt; td.img &gt; a &gt; img'</span>)  <span class="comment"># css选择器搜索图片，不知道为什么它不支持tbody,所以删去就可以了</span></span><br><span class="line">    content = soup.select(<span class="string">'#infolist &gt; table &gt; tr &gt; td.t &gt; p.sub'</span>)  <span class="comment"># 上同</span></span><br><span class="line">    address = soup.select(<span class="string">'#infolist &gt; table &gt; tr &gt; td.t &gt; p.abt &gt; a'</span>)</span><br><span class="line">    price = soup.select(<span class="string">'#infolist &gt; table &gt; tr &gt; td.pd01 &gt; b'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将收集到的数据插入列表</span></span><br><span class="line">    <span class="keyword">for</span> everyImg, everyTitle, everyContent, everyAddress, everyPrice <span class="keyword">in</span> zip(img, title, content, address, price):</span><br><span class="line">        zipData = &#123;</span><br><span class="line">            <span class="string">"title"</span>: everyTitle.get_text().strip(),  <span class="comment"># 删除同时去掉左右两边的空格（包括'\n', '\r', '\t', ' ')</span></span><br><span class="line">            <span class="string">"img"</span>: everyImg.get(<span class="string">"src"</span>),  <span class="comment"># 得到src属性值</span></span><br><span class="line">            <span class="string">"content"</span>: everyContent.get_text(),</span><br><span class="line">            <span class="string">"address"</span>: everyAddress.get_text(),</span><br><span class="line">            <span class="string">"price"</span>: everyPrice.get_text().strip()</span><br><span class="line">        &#125;</span><br><span class="line">        print(zipData)</span><br><span class="line">        information.append(zipData)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬取58同城50页数据</span></span><br><span class="line">information = []</span><br><span class="line"><span class="keyword">for</span> number <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">    <span class="comment"># 为了防止封IP，每次爬取间隔2秒</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">if</span> number == <span class="number">1</span>:</span><br><span class="line">        get58City(<span class="string">'http://bj.58.com/sale/'</span>)</span><br><span class="line">    <span class="keyword">elif</span> number &lt; <span class="number">10</span>:</span><br><span class="line">        url = <span class="string">'http://bj.58.com/sale/pn'</span>+str(number)</span><br><span class="line">        get58City(url)</span><br></pre></td></tr></table></figure>
<h3 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h3><p><img src="http://7xryau.com1.z0.glb.clouddn.com/%E7%88%AC%E8%99%AB%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png" alt="python"></p>
<h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>就这些简单的代码可以得到大量数据，而得到的数据是可以插入到数据库的，下一次我会详细的讲述python和mysql的连接</p>

      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/爬虫利器/" rel="tag">#爬虫利器</a>
          
            <a href="/tags/Python3/" rel="tag">#Python3</a>
          
            <a href="/tags/lxml/" rel="tag">#lxml</a>
          
            <a href="/tags/BeautifulSoup4/" rel="tag">#BeautifulSoup4</a>
          
            <a href="/tags/requests/" rel="tag">#requests</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/04/09/数据结构-d堆（C-实现）/" rel="next" title="数据结构-d堆（C++实现）">
                <i class="fa fa-chevron-left"></i> 数据结构-d堆（C++实现）
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/04/16/Python-MySQL-Connector模块介绍及应用/" rel="prev" title="Python-MySQL Connector模块介绍及应用">
                Python-MySQL Connector模块介绍及应用 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/04/15/Python-模块介绍-58同城二手市场实战爬虫/"
           data-title="Python-模块介绍+58同城二手市场实战爬虫" data-url="http://yoursite.com/2016/04/15/Python-模块介绍-58同城二手市场实战爬虫/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="ZhangZheng" />
          <p class="site-author-name" itemprop="name">ZhangZheng</p>
          <p class="site-description motion-element" itemprop="description">Personal blog, software developer</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">10</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">22</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#爬虫利器-模块"><span class="nav-number">2.</span> <span class="nav-text">爬虫利器-模块</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#安装方法"><span class="nav-number">2.1.</span> <span class="nav-text">安装方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#模块简单介绍"><span class="nav-number">2.2.</span> <span class="nav-text">模块简单介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#requests"><span class="nav-number">2.2.1.</span> <span class="nav-text">requests</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#BeautifulSoup4"><span class="nav-number">2.2.2.</span> <span class="nav-text">BeautifulSoup4</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现代码"><span class="nav-number">3.</span> <span class="nav-text">实现代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试结果"><span class="nav-number">4.</span> <span class="nav-text">测试结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结语"><span class="nav-number">5.</span> <span class="nav-text">结语</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhangZheng</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  
  
<script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>

<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = NexT.utils.escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    NexT.motion.middleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');

      if (CONFIG.scheme !== 'Pisces' && (CONFIG.sidebar.display === 'post' || CONFIG.sidebar.display === 'always')) {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          NexT.utils.displaySidebar();
        }
      }
    };
  });
</script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zzcoder"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  


</body>
</html>
